# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!
#:
#exec split toggle; exec --no-startup-id xinput --set-prop 12 "libinput Natural Scrolling Enabled" 1
exec synapse
exec sudo dnsmasq -S 1.1.1.1
exec /home/xk/bin/trackballscroll.sh
exec xinput set-button-map "Logitech USB Trackball" 1 8 3 4 5 6 7 2 9
exec xinput --set-prop "AlpsPS/2 ALPS GlidePoint" "libinput Natural Scrolling Enabled" 1
exec xinput set-button-map "Logitech M570" 1 2 3 4 5 6 7 2 9
exec xbindkeys
exec pasystray

#exec --no-startup-id nm-applet
#exec --no-startup-id xfce4-power-manager
#exec --no-startup-id copyq

set $mod Mod4
set $alt Mod1
set $ctl Control

#set $esc Escape

#bindsym $mod+colon workspace next
#font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
#font pango:Droid Sans Mono 8

#bindsym $mod+a exec xdotool key XF86AudioMute
#bindsym $mod+s exec xdotool key XF86AudioLowerVolume
#bindsym $mod+d exec xdotool key XF86AudioRaiseVolume
#bindsym $mod+f exec xdotool key XF86AudioNext
#bindsym $mod+g exec xdotool key XF86AudioPause

bindsym $mod+h exec xdotool key Left
bindsym $mod+j exec xdotool key Down
bindsym $mod+k exec xdotool key Up
bindsym $mod+l exec i3lock
bindsym $mod+semicolon exec urxvt -name opener -e fish -C 'o (fzf)' 
#bindsym $mod+' exec xdotool key 


#bindsym $mod+Shift+M mark "scratchterm", move scratchpad
#bindsym $mod+m [con_mark="scratchterm"] scratchpad show
#bindsym $mod+Shift+F1 mark "scratch1", move scratchpad
#bindsym $mod+F1 [con_mark="scratch1"] scratchpad show

# Calculator scratchpad
bindsym $mod+Shift+n [instance="calc"] move scratchpad
bindsym $mod+n [instance="calc"] scratchpad show

for_window [window_role="About"] floating enable

for_window [class="mpv"] floating enable, sticky enable
for_window [instance="yakuake"] floating enable
for_window [instance="Borderlands"] floating enable
for_window [instance="Launcher.exe"] floating enable

# Use Mouse+$ctl to drag floating windows to their wanted position
floating_modifier $ctl

# start a terminal

bindsym $ctl+$mod+b exec urxvt -e sh -c "ls; bash"
#bindsym $ctl+$mod+space exec i3-sensible-terminal; exec "bash -c 'sleep 0.1s;i3-msg floating enable;i3-msg border normal 2;i3-msg resize set 400px 300px'"
bindsym $ctl+$mod+space exec urxvt -name floatingwin
bindsym $mod+t exec konsole
for_window [class="konsole"] move down
for_window [class="konsole"] resize shrink up 220px

bindsym $mod+p exec keepass
bindsym $alt+v exec geany --class floatingwin
for_window [title="Calculator"] floating enable
for_window [class="^keepass$"] floating enable
for_window [class="^floatingwin$"] floating enable


# Make the currently focused window a scratchpad
bindsym $ctl+Shift+minus move scratchpad


bindsym $ctl+b exec split vertical; exec pcmanfm
bindsym $mod+Next exec split toggle; exec --no-startup-id xcalib -red 1.04 1 92 -green 1.04 1 80 -blue 1.08 1 57 -moder
bindsym $mod+Prior exec split toggle; exec --no-startup-id xcalib -clear

set $Locker i3lock -c 000000 && sleep 1

set $mode_system System (l) lock, (s) suspend, (h) hibernate, (r) reboot, (Shift+s) shutdown
mode "$mode_system" {
    bindsym l exec --no-startup-id $Locker, mode "default"
    bindsym s exec --no-startup-id $Locker && systemctl suspend, mode "default"
    bindsym h exec --no-startup-id $Locker && systemctl hibernate, mode "default"
    bindsym Shift+s exec --no-startup-id systemctl poweroff -i, mode "default"  

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $alt+l mode "$mode_system"

bindsym $ctl+$mod+p exec bash /home/xk/bin/toggle-monitor.sh

exec xautolock -time 10 -locker "i3lock -c 000000" &

# kill focused window
bindsym $ctl+q kill
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable

focus_follows_mouse yes

#bindsym $mod+l focus left
#bindsym $mod+h focus right

bindsym $ctl+$mod+Tab move container to workspace next
bindsym $alt+Tab workspace back_and_forth
bindsym $alt+Shift+Tab workspace prev

# modernatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# enter fullscreen mode for the focused container
bindsym $ctl+grave fullscreen toggle
bindsym $mod+w fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $ctl+$mod+g layout tabbed
bindsym $ctl+$mod+t layout toggle split

# toggle tiling / floating
bindsym $ctl+Shift+space "mark --add _; [con_mark=f] floating disable, border none, mark --add --toggle _; [con_mark=_] floating enable, border none, sticky enable; mark --add --toggle f;"
floating_maximum_size 800x700
hide_edge_borders both
default_floating_border none
show_marks no
# change focus between tiling / floating windows
#bindsym $ctl+space focus mode_toggle

# focus the parent container
#bindsym $ctl+g focus parent

# focus the child container
#bindsym $ctl+d focus child

# kill focused window
bindsym $mod+Shift+q kill


# switch to workspace
bindsym $alt+space workspace 1
bindsym $mod+1 workspace 11
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 11
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

#bindsym $ctl+Shift+r restart

# exit i3 (logs you out of your X session)
#bindsym $ctl+Shift+e exec split toggle; exec --no-startup-id "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize grow width 10 px or 10 ppt
        bindsym Down resize shrink height 10 px or 10 ppt
        bindsym Up resize grow height 10 px or 10 ppt
        bindsym Right resize shrink width 10 px or 10 ppt

        # back to normal: Enter or Escape or $ctl+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"
bindsym $mod+v resize set 400px 300px; move position 1170px 625px

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)


#add the following to your i3 configuration:
exec --no-startup-id wmctrl -c Plasma
for_window [title="Desktop — Plasma"] kill; floating enable; border none

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
# exit i3 (logs you out of your X session)

# start application launchers

# start application launchers
bindsym $mod+d exec ~/.local/bin/dmenu_run_history -p 'Run: ' -l 10 -i -nb '#000000' -nf '#4c7899' -fn 'Droid Sans Mono-9:bold'
bindsym $mod+x exec --no-startup-id i3-dmenu-desktop --dmenu="dmenu -p 'Run: ' -l 10 -i -nb '#000000' -nf '#4c7899' -fn 'Droid Sans Mono-9:bold'"
bindsym $mod+q exec konsole -e ~/bin/fzf_launcher.sh
bindsym $mod+e exec krusader
bindsym $mod+Shift+e exec konsole -e nano /home/xk/bin/dotfiles/i3_plasma_config && cp /home/xk/bin/dotfiles/i3_plasma_config ~/.i3-plasma/.i3/config && i3-msg restart

#---( direct launchers )---#

bindsym $mod+Return exec sakura
bindsym $mod+grave exec konsole --new-tab
bindsym $mod+Shift+Return exec "emacsclient -c"
bindsym $mod+Shift+F7 exec --no-startup-id "nitrogen --restore"
bindsym $mod+Shift+F1 exec "thunderbird"
bindsym $mod+Shift+F2 exec "luakit"
bindsym $mod+Shift+F3 exec "firefox"
bindsym $mod+Shift+F5 exec --no-startup-id "~/.local/bin/camshot"
bindsym $mod+Shift+Delete exec --no-startup-id "~/.local/bin/toggle_touchpad"
bindsym $mod+Shift+p exec --no-startup-id "konsole -e htop"
bindsym Print exec --no-startup-id "XDG_CURRENT_DESKTOP=kde spectacle"
bindsym $mod+Print exec --no-startup-id "~/.local/bin/xflock4"
#bindsym $mod+backslash exec --no-startup-id "XDG_CURRENT_DESKTOP=kde dolphin"
bindcode 148 exec --no-startup-id "XDG_CURRENT_DESKTOP=kde kcalc"

# Key bindings recycling station:
#bindsym XF86MyComputer exec --no-startup-id "XDG_CURRENT_DESKTOP=kde dolphin"
#bindsym XF86AudioRaiseVolume exec --no-startup-id "~/.local/bin/volume -i 5 -n"
#bindsym XF86AudioLowerVolume exec --no-startup-id "~/.local/bin/volume -d 5 -n"
#bindsym XF86AudioMute exec --no-startup-id "~/.local/bin/volume -m -n"
#bindsym XF86AudioMicMute exec --no-startup-id "~/.local/bin/volume -r -n"
#bindsym KP_8 exec --no-startup-id "~/.local/bin/volume -i 5 -n"
#bindsym KP_2 exec --no-startup-id "~/.local/bin/volume -d 5 -n"
#bindsym KP_5 exec --no-startup-id "~/.local/bin/volume -m -n"
#bindsym KP_1 exec --no-startup-id "~/.local/bin/volume -r -n"
#bindsym XF86AudioRaiseVolume exec --no-startup-id "/home/victor/scripts/volnoti-handle.sh up"
#bindsym XF86AudioLowerVolume exec --no-startup-id "/home/victor/scripts/volnoti-handle.sh down"


#----------[ STATUS BAR ]----------#

bar {
    # If you want a bar, uncomment one of these: 
    # status_command $HOME/.local/bin/conky-i3bar.sh
    # status_command i3status
    # status_command i3blocks
    mode invisible
    colors {
        background #111111
        statusline #ffffff
        separator #cccccc

        #focused_workspace  #555555 #121212 #dddddd
        #active_workspace   #555555 #555555 #dddddd
        #inactive_workspace #555555 #555555 #dddddd
        #urgent_workspace   #555555 #770000 #dddddd

        focused_workspace  #555555 #666666 #dddddd
        active_workspace   #555555 #555555 #dddddd
        inactive_workspace #555555 #111111 #dddddd
        urgent_workspace   #555555 #770000 #dddddd
    }

    # tray_output eDP1
    tray_output none
}

#font pango:monospace 8


#----------[ MISC SETTINGS ]----------#

# Pressing $mod and current workspace number takes you back to the previousle active workspace
workspace_auto_back_and_forth yes


#---( startup items )---#

exec_always --no-startup-id nitrogen --restore
exec_always --no-startup-id xmodmap -e "clear lock" #disable caps lock switch
exec_always --no-startup-id xmodmap -e "keysym Caps_Lock = Escape" #set caps_lock as escape
exec_always --no-startup-id 'emacs --daemon'
exec --no-startup-id 'xset -b'
exec_always --no-startup-id 'xset b off'

# Startup items recycling station:
#exec_always --no-startup-id xmodmap -e 'clear Lock' -e 'keycode 0x42 = Escape'
#exec_always --no-startup-id sleep 2 && feh --bg-fill /home/victor/Wallpapers/natgeo
#exec --no-startup-id 'kmix'
#exec --no-startup-id 'nm-applet'
#exec --no-startup-id 'redshift-gtk -l 44.43:26.09 -t 5700:4850'
#exec --no-startup-id 'xfce4-power-manager'


#---( colors table )---#

# class                 border  backgr. text    indicator
#client.focused          #4c7899 #111111 #00b2b2 #2e9ef4 #990000
client.focused          #990000 #111111 #00b2b2 #2e9ef4
client.focused_inactive #333333 #000000 #ffffff #484e50 
client.unfocused        #333333 #000000 #888888 #292d2e
client.urgent           #2f343a #900000 #ffffff #900000
#client.placeholder      #000000 #0c0c0c #ffffff #000000 #990000
client.background       #000000


#---( windows rules )---#

# No border windows
for_window [class="(?i)terminator"] border none 
for_window [class="(?i)terminology"] border none 
for_window [class="(?i)dwb"] border none 
for_window [class="(?i)luakit"] border none 
for_window [class="(?i)rambox"] border none 
for_window [class="(?i)franz"] border none 
for_window [class="(?i)firefox"] border none
for_window [class="(?i)iceweasel"] border none 
for_window [class="(?i)jetbrains"] border none
for_window [class="(?i)kontact"] border none
for_window [class="(?i)kmail"] border none
#for_window [class="(?i)emacs"] border none
for_window [class="(?i)chrom"] border none
for_window [class="(?i)gvim"] border none
for_window [class="(?i)vivaldi"] border none

# Float by name
for_window [title="Nitrogen"] floating enable
for_window [title="Install user style"] floating enable
for_window [title="KCalc"] floating enable
for_window [class="plasmashell"] floating enable


# Float by type
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod


#---( focus related )---)

#focus_follows_mouse no

#no_focus [class="plasmashell"]
no_focus [window_role="pop-up"]
no_focus [window_type="notification"]
#for_window [class="plasmashell" window_type="notification"] move position 1600 50

#focus_on_window_activation none

exec --no-startup-id "compton --config ~/.config/compton/compton.conf -b -CGb --backend glx --vsync opengl"

default_border none
default_floating_border pixel 1

# Pulse Audio controls
#bindsym XF86AudioRaiseVolume exec pactl -- set-sink-volume 0 +5% #increase sound volume; exec pactl -- set-sink-volume 1 +5%
#bindsym XF86AudioLowerVolume exec pactl -- set-sink-volume 0 -5% #decrease sound volume; exec pactl -- set-sink-volume 1 -5%
#bindsym XF86AudioMute exec pactl set-sink-mute 1 toggle # mute sound

# Brightness
#bindsym XF86MonBrightnessDown exec split toggle; exec --no-startup-id bin/brightness - 500
#bindsym XF86MonBrightnesalt exec split toggle; exec --no-startup-id bin/brightness + 500

# Set background for root window.
exec --no-startup-id xsetroot -solid "#555555"
